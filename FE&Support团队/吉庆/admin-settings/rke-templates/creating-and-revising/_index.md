---
标题：创建和修改模板
---

本节介绍如何管理RKE模板和修订版。您可以在`工具`>` RKE模板`下的`全局`视图中创建，共享，更新和删除模板。

模板更新通过修订系统进行处理。模板所有者想要更改或更新模板时，会创建该模板的新修订版。各个修订不能编辑。但是，如果要防止使用修订来创建新集群，则可以将其禁用。

可以使用两种方式来使用模板修订：创建新群集，或升级使用较早版本的模板创建的群集。模板创建者可以选择默认修订版，但是最终用户创建集群时，他们可以选择任何模板以及可供他们使用的任何模板修订版。从特定修订版创建群集后，就无法将其更改为另一个模板，但是可以将群集升级为同一模板的较新的可用修订版。

模板所有者对模板修订版具有完全控制权，并且可以创建新的修订版来更新模板，删除或禁用不应用于创建集群的修订版，并选择默认的模板修订版。

本节涵盖以下主题：

- [先决条件](＃prerequisites)
- [创建模板](＃creating-a-template)
- [更新模板](＃updating-a-template)
- [删除模板](＃deleting-a-template)
- [基于克隆修订版本创建修订版本](＃creating-a-revision-based-on-a-cloned-revision)
- [禁用模板修订](＃disabling-a-template-revision)
- [重新启用禁用的模板修订版](＃re-enabling-a-disabled-template-revision)
- [将模板修订设置为默认设置](＃setting-a-template-revision-as-default)
- [删除模板修订版](＃deleting-a-template-revision)
- [将运行中的群集导出到新的RKE模板和修订版](＃exporting-running-cluster到一个新的rke模板和修订版)

#### 先决条件

如果您具有[创建RKE模板]权限，则可以创建RKE模板，该权限可以[由管理员提供。](/docs/admin-settings/rke-templates/creator-permissions)

如果您是模板的所有者，则可以修改，共享和删除模板。有关如何成为模板所有者的详细信息，请参阅[有关共享模板所有权的文档。](/docs/admin-settings/rke-templates/template-access-and-sharing/＃sharing-ownership-of-模板)

#### 创建模板

1. 在`全局`视图中，单击`工具`>` RKE模板`。
2. 单击 **添加模板。**
3. 提供模板的名称。已经为模板的第一个版本提供了自动生成的名称，该名称随该模板一起创建。
4. 可选：通过[将其他用户或组添加为成员](/docs/admin-settings/rke-templates/template-access-and-sharing/＃sharing-templates-with-specific-users )与其他用户或组共享模板。您还可以将模板公开，以与Rancher设置中的所有人共享。
5. 然后按照屏幕上的表单将集群配置参数保存为模板修订版的一部分。可以将该版本标记为该模板的默认版本。

**结果：** 配置了一个修订版的RKE模板。当您[配置Rancher启动的集群](/docs/cluster-provisioning/rke-clusters)时，可以稍后使用此RKE模板修订版。

#### 更新模板

当您更新RKE模板时，您正在创建现有模板的修订版。可以更新使用较旧版本的模板创建的群集，以匹配新版本。

您无法编辑单个修订。由于您无法编辑模板的各个修订，因此为了防止使用修订，可以[禁用它。](＃disabling-a-template-revision)

创建新的模板修订版时，使用该模板的旧修订版的群集不受影响。

1. 在`全局`视图中，单击`工具`>` RKE模板`。
2. 转到要编辑的模板，然后单击`垂直省略号(...)>编辑`。
3. 编辑所需的信息，然后单击`保存`。
4. 可选：您可以更改此模板的默认版本，也可以更改与谁共享。

**结果：** 模板已更新。要将其应用于使用较旧版本模板的集群，请参阅[升级集群以使用模板的新修订版。](＃upgrading-a-cluster-to-use-a-new-template)

#### 删除模板

当不再对任何集群使用RKE模板时，可以将其删除。

1. 在`全局`视图中，单击`工具`>` RKE模板`。
2. 转到要删除的RKE模板，然后单击`垂直省略号(...)>删除`。
3. 出现提示时，确认删除。

**结果：** 模板被删除。

#### 基于默认修订创建修订

您可以克隆默认模板修订版并快速更新其设置，而无需从头开始创建新修订版。克隆模板为您节省了重新输入集群创建所需的访问密钥和其他参数的麻烦。

1. 在`全局`视图中，单击`工具`>` RKE模板`。
2. 转到要克隆的RKE模板，然后单击`垂直省略号(...)`>`从默认版本进行新修订`。
3. 完成表单的其余部分以创建新修订。

**结果：** 克隆并配置了RKE模板修订版。

#### 基于克隆修订创建修订

通过用户设置创建新的RKE模板修订版时，可以克隆现有修订版并快速更新其设置，而无需从头开始创建新的修订版。克隆模板修订版可省去重新输入集群参数的麻烦。

1. 在`全局`视图中，单击`工具`>` RKE模板`。
2. 转到要克隆的模板修订版。然后选择`省略号>克隆修订`。
3. 完成表格的其余部分。

**结果：** 克隆并配置了RKE模板修订版。设置群集后，可以在以后使用RKE模板修订版。使用此RKE模板的任何现有群集都可以升级到此新修订版。

#### 禁用模板修订

当您不再希望将RKE模板修订版本用于创建新集群时，可以将其禁用。禁用的修订版可以重新启用。

如果任何群集都未使用该修订，则可以禁用该修订。

1. 在`全局`视图中，单击`工具`>` RKE模板`。
2. 转到要禁用的模板修订版。然后选择`省略号>禁用`。

**结果：** RKE模板修订版不能用于创建新集群。

#### 重新启用禁用的模板修订

如果您决定应该使用禁用的RKE模板修订版来创建新集群，则可以重新启用它。

1. 在`全局`视图中，单击`工具`>` RKE模板`。
2. 转到您要重新启用的模板修订版。然后选择`省略号>启用`。

**结果：** RKE模板修订版可用于创建新集群。

#### 将模板修订设置为默认

最终用户使用RKE模板创建集群时，他们可以选择用于创建集群的版本。您可以配置默认使用哪个修订版。

要将RKE模板修订设置为默认设置，

1. 在`全局`视图中，单击`工具`>` RKE模板`。
2. 转到应该为默认值的RKE模板修订，然后单击`省略号(...)>设置为默认值`。

**结果：** 当使用模板创建集群时，RKE模板修订版将用作默认选项。

#### 删除模板修订

您可以删除模板的所有修订版(默认修订版除外)。

要永久删除修订，

1. 在`全局`视图中，单击`工具`>` RKE模板`。
2. 转到应删除的RKE模板修订，然后单击`省略号(...)>删除`。

**结果：** RKE模板修订已删除。

#### 升级群集以使用新的模板修订版

> 本节假定您已经有一个集群，其中该集群[已应用RKE模板。](/docs/admin-settings/rke-templates/applying-templates)
> 本节还假设您已经[更新了集群使用的模板](＃updating-a-template)，以便可以使用新的模板修订版。

要将群集升级为使用新的模板修订版，

1. 从Rancher的`全局`视图中，单击`集群`选项卡。
2. 转到要升级的群集，然后单击`省略号(...)>编辑`。
3. 在`群集选项`部分中，单击模板修订的下拉菜单，然后选择新的模板修订。
4. 点击**保存。**

**结果：** 集群已升级为使用新模板修订版中定义的设置。

#### 将正在运行的群集导出到新的RKE模板并进行修订

您可以将现有集群的设置另存为RKE模板。

这会将群集的设置导出为新的RKE模板，并且还将群集绑定到该模板。结果是只有在[模板已更新](/docs/admin-settings/rke-templates/creating-and-revising/＃updating-a-template)且群集升级到[使用较新版本的模板。]

要将现有集群转换为使用RKE模板，

1. 从Rancher的`全局`视图中，单击`集群`选项卡。
2. 转到将转换为使用RKE模板的群集。单击**省略号(...)**> **另存为RKE模板。**
3. 在显示的表单中输入模板的名称，然后单击`创建`。

**结果：**

- 创建了一个新的RKE模板。
- 将群集转换为使用新模板。
- 可以[从新模板和修订版中创建新集群。](/docs/admin-settings/rke-templates/applying-templates/＃creating-a-cluster-from-an-rke-template)
