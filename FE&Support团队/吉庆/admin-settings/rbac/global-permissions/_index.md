---
标题：全局权限
---

_Permissions_是在为用户选择自定义权限时可以分配的单独访问权限。

全局权限在任何特定群集范围之外定义用户授权。开箱即用，有两个默认的全局权限：`管理员`和`标准用户`。

- **管理员：** 这些用户完全控制整个Rancher系统及其中的所有群集。

- <a id="user"> </a> **标准用户：** 这些用户可以创建新集群并使用它们。标准用户还可以向其他用户分配对其集群的权限。

您无法更新或删除内置的全局权限。

本节涵盖以下主题：

- [全局权限分配](＃global-permission-assignment)
    - [新本地用户的全局权限](＃global-permissions-for-new-local-users)
    - [具有外部身份验证的用户的全局权限](＃global-permissions-for-users-with-external-authentication)
- [自定义全局权限](＃custom-global-permissions)
    - [自定义全局权限参考](＃custom-global-permissions-reference)
    - [为新用户配置默认的全局权限](＃configuring-default-global-permissions)
    - [为现有的单个用户配置全局权限](为现有的单个用户配置＃configuring-global-permissions)
    - [为群组配置全局权限](＃configuring-global-permissions-for-groups)
    - [刷新组成员身份](＃refreshing-group-memberships)

## 全局权限分配

本地用户的全局权限分配与使用外部身份验证登录到Rancher的用户不同。

#### 新本地用户的全局权限

当您创建新的本地用户时，请在填写`添加用户`表单时为其分配全局权限。

要查看新用户的默认权限，请转到`全局`视图，然后单击`安全性`>`角色`。在`全局`选项卡上，有一列名为`新用户默认值`。添加新的本地用户时，该用户将收到在此列中标记为已选中的所有默认全局权限。您可以[更改默认的全局权限来满足您的需求。](＃configuring-default-global-permissions)

#### 具有外部身份验证的用户的全局权限

当用户首次使用外部身份验证提供程序登录Rancher时，会自动为他们分配 **New User Default** 全局权限。默认情况下，Rancher为新用户分配`标准用户`权限。

要查看新用户的默认权限，请转到`全局`视图，然后单击`安全性`>`角色`。在`全局`选项卡上，有一列名为`新用户默认值`。添加新的本地用户时，该用户会收到此列中标记为已选中的所有默认全局权限，您可以[更改它们以满足您的需要。](＃configuring-default-global-permissions)

可以使用[这些步骤](＃configuring-global-permissions-for-existing-individual-users)将权限分配给单个用户。

从Rancher v2.4.0-alpha1开始，如果外部身份验证提供程序支持组，则可以[同时向组中的每个人分配角色](＃configuring-global-permissions-for-groups)。

## 自定义全局权限

使用自定义权限可以为用户提供对Rancher的狭窄或专业访问。

来自[外部认证来源](/docs/admin-settings/authentication/)的用户首次登录Rancher时，会自动为他们分配一组全局权限(以下称权限)。默认情况下，在用户首次登录后，将以用户身份创建他们并为其分配默认的`用户`权限。标准的`用户`权限允许用户登录并创建集群。

但是，在某些组织中，这些权限可能会扩展过多的访问权限。您可以为他们分配一组限制性更强的自定义全局权限，而不是为用户分配`管理员`或`标准用户`的默认全局权限。

默认角色，管理员和标准用户，每个角色都内置有多个全局权限。管理员角色包括所有全局权限，而默认用户角色包括三个全局权限：`创建群集`，`使用目录模板`和`用户库`，这等效于登录Rancher的最低权限。换句话说，自定义全局权限是模块化的，因此，如果您要更改默认用户角色权限，则可以选择新的默认用户角色中包含哪些全局权限子集。

管理员可以通过多种方式实施自定义全局权限：

- [更改新用户的默认权限](＃configuring-default-global-permissions)
- [编辑现有用户的权限](＃configuring-global-permissions-for-dividual-users)
- [将自定义全局权限分配给组](＃assigning-a-custom-global-permission-to-a-group)

#### 自定义全局权限参考

下表列出了每个可用的自定义全局权限以及默认全局权限`管理员`和`标准用户`中是否包含该自定义全局权限。

|自定义全局权限|管理员|标准用户|
| ---------------------------------- | ------------- | ------------- |
|创建集群| ✓| ✓|
|创建RKE模板| ✓| ✓|
|管理身份验证| ✓| |
|管理目录| ✓| |
|管理群集驱动程序| ✓| |
|管理节点驱动程序| ✓| |
|管理PodSecurityPolicy模板| ✓| |
|管理角色| ✓| |
|管理设置| ✓| |
|管理用户| ✓| |
|使用目录模板| ✓| ✓|
|用户群\ *(基本登录访问)| ✓| ✓|

> \ *此角色有两个名称：
> - 转到<b>用户</b>选项卡并编辑用户的全局角色时，此角色在自定义全局权限列表中称为<b>登录访问</b>。
> - 转到<b>`安全性` </b>选项卡并从`角色`页面编辑角色时，该角色称为<b>用户库。</b>

有关与每个全局权限对应的Kubernetes资源的详细信息，可以转到Rancher UI中的 **Global** 视图。然后单击`安全>角色`，然后转到`全局`标签。如果单击单个角色，则可以参考`授权资源`表以查看该角色允许的所有操作和资源。

> **注意：**
> - 上面列出的每个权限都包含多个未在Rancher UI中列出的单独权限。有关这些权限及其所包含规则的完整列表，请通过API在/v3/globalRoles中进行访问。
> - 查看与Rancher创建的默认角色相关联的资源时，如果一个订单项上有多个Kubernetes API资源，则该资源将附加`(自定义)`。这些不是自定义资源，仅表示有多个Kubernetes API资源作为一种资源。

#### 配置默认的全局权限

如果要限制新用户的默认权限，则可以删除` user`权限作为默认角色，然后分配多个单独的权限作为默认角色。相反，您也可以在一组其他标准权限之上添加管理权限。

> **注意：** 默认角色仅分配给从外部身份验证提供程序添加的用户。对于本地用户，在将用户添加到Rancher时，必须显式分配全局权限。您可以在添加用户时自定义这些全局权限。

要更改在外部用户首次登录时分配给他们的默认全局权限，请按照下列步骤操作：

1. 在`全局`视图中，从主菜单中选择`安全性>角色`。确保选择了`全局`选项卡。

2. 查找要默认添加或删除的权限集。然后通过选择`省略号>编辑`来编辑权限。

3. 如果要添加默认权限，请选择`是：新用户的默认角色`，然后单击`保存`。

4. 如果要删除默认权限，请编辑该权限，然后从`新用户默认值`中选择`否`。

**结果：** 根据您的更改配置默认的全局权限。分配给新用户的权限在`新用户默认值`列中显示一个检查。

#### 为现有个人用户配置全局权限

要配置用户的权限，

1.转到`用户`标签。

1.在此页面上，转到要更改其访问级别的用户，然后单击`省略号(...)>编辑`。**

1.在`全局权限`部分中，单击`自定义`。

1.选中您要用户有权访问的每个权限子集的框。

1.点击**保存。**

> **结果：** 用户的全局权限已更新。

#### 配置组的全局权限

_自v2.4.0-alpha1起可用

如果您有一组需要在Rancher中具有相同访问级别的个人，则可以节省时间一次将权限分配给整个组，这样该组中的用户在首次登录时便具有适当的访问级别。牧场主

将自定义全局角色分配给组后，该自定义全局角色将在用户登录Rancher时分配给该组中的用户。

对于现有用户，新权限将在用户注销Rancher并再次登录或管理员[刷新组成员身份]时生效。(＃refreshing-group-memberships)

对于新用户，新权限在用户首次登录Rancher时生效。除了 **New User Default** 全局权限外，该组中的新用户还将收到自定义全局角色的权限。默认情况下，`新用户默认`权限等同于`标准用户`全局角色，但是默认权限可以[配置。](＃configuring-default-global-permissions)

如果将用户从外部身份验证提供程序组中删除，他们将失去分配给该组的自定义全局角色的权限。他们将继续拥有分配给他们的所有剩余角色，通常包括标记为`新用户默认值`的角色。** Rancher将在用户注销或用户退出时删除与该组关联的权限。管理员[刷新组成员身份](<(＃refreshing-group-memberships >>)，以先到者为准。

> **先决条件：** 您只能在以下情况下为组分配全局角色：
>
> - 您已经设置了[外部身份验证提供程序](/docs/admin-settings/authentication/＃external-vs-local-authentication)
> - 外部身份验证提供程序支持[用户组](/docs/admin-settings/authentication/user-groups/)
> - 您已经通过身份验证提供程序建立了至少一个用户组

要将自定义全局角色分配给组，请按照下列步骤操作：

1. 从`全局`视图中，转到`安全性`>`组`。
2. 单击`分配全局角色`。
3. 在`选择要添加的组`字段中，选择将被分配自定义全局角色的现有组。
4. 在`全局权限`，`自定义`和/或`内置`部分中，选择组应具有的权限。
5. 点击**创建。**

**结果：** 自定义全局角色将在组中的用户登录到Rancher时生效。

#### 刷新组成员身份

管理员更新组的全局权限时，更改将在单个组成员退出Rancher并再次登录后生效。

为了使更改立即生效，管理员或群集所有者可以刷新组成员身份。

如果将用户从外部身份验证服务中的组中删除，则管理员可能还希望刷新组成员身份。在这种情况下，刷新使Rancher意识到该用户已从组中删除。

要刷新组成员身份，

1. 在`全局`视图中，单击`安全性`>`用户`。
2. 单击`刷新组成员身份`。

**结果：** 对群组成员权限的任何更改将生效。
